<html>
<head>
	
	<title>MyMap</title>

	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link rel="apple-touch-icon" sizes="180x180" href="/static/img/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/static/img/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/static/img/favicon-16x16.png">
	<link rel="manifest" href="/static/img/site.webmanifest">
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css" integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ==" crossorigin=""/>
	<script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js" integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og==" crossorigin=""></script>
	<script src="https://cdn.jsdelivr.net/npm/vue"></script>
	<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
	<link rel="stylesheet" href="static/style.css">
</head>
<body>

<div id="map" v-bind:style="{width: width, height: height}"></div>

<div id="hidebarb">
<div id="hidebar">
	<div id="timeline" v-if="show.n == 'timeline'">
		<hr>
		<div class="right">
			<a href="#" v-on:click="closeTimeline($event)" align="right"><img src="static/img/close.svg"></a>
		</div>

		Timeline
		<div v-if="state != 'ready'">
			<small>{{state}}...</small>
		</div>
		<table id="visitable">
		<tr v-for="(vis, idx) in visited">
			<td align="right">{{vis.date}}</td>
			<td><a href="#" v-on:click="highlightPoint($event, vis.pt)"><img src="static/img/locate.svg"></a></td>
			<td width="100%">{{vis.pt.name}}</td>
			<td>{{vis.tags.join(" ")}}</td>
		</tr>
		</table>
	</div>
	<div id="points" v-if="show.n == 'points'">
		<hr>
		<div class="right">
			<a href="#" v-on:click="closePoints($event)" align="right"><img src="static/img/close.svg"></a>
		</div>
		Points
		<a href="#" v-on:click="hide.toggle($event)">
			<img v-if="hide.i == 0" src="static/img/show.svg">
			<img v-if="hide.i == 1" src="static/img/hide.svg">
		</a>
		<ul>
			<li v-for="plist in loadedS">
				{{plist.country}} <small>[{{plist.pts.length}}]</small>
				<ul>
				<li v-for="pnt in plist.pts">
					<a href="#" v-on:click="highlightPoint($event, pnt)"><img src="static/img/locate.svg"></a>
					{{pnt.name}}
					<a href="#" v-on:click="removePoint($event, pnt)"><img src="static/img/remove.svg"></a>
				</li>
				</ul>
			</li>
		</ul>
	</div>
	<div id="areas" v-if="show.n == 'areas'">
		<hr>
		<div class="right">
			<a href="#" v-on:click="closeAreas($event)" align="right"><img src="static/img/close.svg"></a>
		</div>
		Areas
			<a href="#" v-on:click="sorted.toggle()">
				<img v-if="sorted.i == 0" src="static/img/unsort.svg">
				<img v-if="sorted.i == 1" src="static/img/sort.svg">
				<img v-if="sorted.i == 2" src="static/img/sort-r.svg">
			</a>
		<ul>
			<li v-for="area in loadedS">
				<td><a href="#" v-on:click="highlightArea($event, area)"><img src="static/img/locate.svg"></a></td>
				{{area.name}}
				<span v-if="area.state != 'ready'">
					<small>{{area.state}}...</small>
				</span>
				<span v-if="area.state == 'ready'">
					<a href="#" v-on:click="removeArea($event, area)"><img src="static/img/remove.svg"></a>
				</span>
			</li>
		</ul>
	</div>
</div>
</div>

<div id="sidebarb">
<div id="sidebar">
	<div id="menu">
		<div id="login">
			<span v-if="viewmap != null">
				<img src="static/img/show.svg" title="view mode">
			</span>
			<span v-if="sess == null"><img src="static/img/more.svg"></span>
			<span v-if="sess != null">
				<span v-if="sess.user == null"><a href="/login">login</a></span>
				<span v-if="sess.user != null">{{sess.user.name}}&nbsp;<a href="/logout">(logout)</a></span>
			</span>
		</div>

		<div id="other">
			<a href="#" v-on:click="showTimeline($event)"><img src="static/img/timeline.svg" title="Timeline"></a>
			<a href="#" v-on:click="showPoints($event)"><img src="static/img/points.svg" title="Points"></a>
			<a href="#" v-on:click="showAreas($event)"><img src="static/img/areas.svg" title="Areas"></a>
			<span v-if="share != ''">
				<a href="#" v-bind:href="share"><img src="static/img/share.svg" title="Link to this map"></a>
			</span>
		</div>
	</div>
	<div id="status" v-if="message != ''">
		<span v-if="type == 'error'" class="error"> {{message}} </span>
		<span v-if="type == 'warning'" class="warning"> {{message}} </span>
		<span v-if="type == 'info'" class="info"> {{message}} </span>
	</div>
	<div id="pprops" v-if="point != null">
		<hr>
		<div class="right">
			<a href="#" v-on:click="closeProps($event)" align="right"><img src="static/img/close.svg"></a>
		</div>

		<img src="static/img/place.svg"> {{point.name}}

		<table id="sumtable">
		<tr><td>Id</td><td>{{point.id}}</td></tr>
		<tr><td>Coord</td><td>{{point.lat.toFixed(4)}} / {{point.lng.toFixed(4)}}</td></tr>
		<tr><td>Inside</td><td>{{point.area}}:{{point.countries.join(",")}}</td></tr>
		</table>

		<br><img src="static/img/visit.svg"><br>
		<input v-model="nvDate" placeholder="dd/mm/yyyy">
		<input v-model="nvTags" placeholder="tag, ...">
		<a href="#" v-on:click="addVisit($event)"><img src="static/img/add.svg"></a>

		<table id="visitable">
		<tr v-for="(vis, idx) in visited">
			<td align="right">{{vis.date}}</td>
			<td width="100%">{{vis.tags.join(" ")}}</td>
			<td><a href="#" v-on:click="removeVisit($event, idx)"><img src="static/img/remove.svg"></a></td>
			<td><small>{{idx}}:{{vis.idx}}</small></td>
		</tr>
		</table>
	</div>
	<div id="marker" v-if="latlng != null">
		<hr>
		<div class="right">
			<a href="#" v-on:click="clearMarker($event)"><img src="static/img/close.svg"></a>
		</div>

		<img src="static/img/point.svg">
		{{latlng.lat.toFixed(4)}} / {{latlng.lng.toFixed(4)}}
		<small v-if="inside != null">({{inside.area}}:{{inside.countries.join(',')}})</small>
	</div>
	<div id="selection" v-if="available.length != 0">
		<img src="static/img/area.svg">
		<template v-for="area in available">
			<div v-if="show.show(area)">
				<input type="checkbox" v-bind:value="area" v-model="selected">
				<label>{{area.name}} <small>({{area.type}})</small></label><br>
			</div>
		</template>
		<a href="#" v-on:click="show.toggle($event)"><img v-if="show.i == 0" src="static/img/more.svg"><img v-if="show.i == 1" src="static/img/less.svg"></a><br>

		<img src="static/img/place.svg">
		<input v-model="pointName" placeholder="enter the point name">
		<a href="#" v-on:click="loadSelected($event)"><img src="static/img/add.svg"></a>
	</div>
</div>
</div>

<script src="/static/config.js"></script>
<script src="/static/main.js"></script>
</body>
</html>
